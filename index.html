<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>KLOHE - Valentine's Day Collection</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíó</text></svg>">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Cormorant+Garamond:wght@400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ... (mant√©n todo tu CSS igual) ... */
    </style>
</head>
<body>

    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo">KLOHE</a>
                <div class="nav-right">
                    <div class="social-header">
                        <a href="https://instagram.com/klohesv" target="_blank" class="social-btn" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://tiktok.com/@klohesv" target="_blank" class="social-btn" title="TikTok">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="https://facebook.com/klohejewelry" target="_blank" class="social-btn" title="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                    </div>
                    
                    <button class="menu-toggle" id="menuBtn" aria-label="Men√∫">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>

                    <div class="user-icon" id="userIcon" onclick="toggleUserModal()" title="Mi Cuenta">
                        <i class="fas fa-user"></i>
                        <div class="user-badge" id="userBadge"></div>
                    </div>

                    <div class="cart-icon" onclick="toggleCart()" aria-label="Carrito">
                        <i class="fas fa-shopping-bag"></i>
                        <span class="cart-count" id="cartBadge" style="display: none;">0</span>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>
    <div class="categories-menu" id="categoriesMenu">
        <button class="close-menu" onclick="toggleMenu()"><i class="fas fa-times"></i></button>
        <h3 id="menuTitle">Categor√≠as</h3>
        
        <button class="category-btn active" onclick="filterProducts('todos', this)">Todas</button>
        <button class="category-btn" onclick="filterProducts('accesorios-cabello', this)">Accesorios para el cabello</button>
        <button class="category-btn" onclick="filterProducts('anillo', this)">Anillos</button>
        <button class="category-btn" onclick="filterProducts('aritos', this)">Aritos</button>
        <button class="category-btn" onclick="filterProducts('cartera', this)">Carteras</button>
        <button class="category-btn" onclick="filterProducts('collar', this)">Collares</button>
        <button class="category-btn" onclick="filterProducts('lentes-sol', this)">Lentes de sol</button>
        <button class="category-btn" onclick="filterProducts('otros', this)">Otros</button>
        <button class="category-btn" onclick="filterProducts('pulsera', this)">Pulseras</button>
        <button class="category-btn" onclick="filterProducts('reloj', this)">Relojes</button>
    </div>

    <div class="overlay" id="userOverlay" onclick="toggleUserModal()"></div>
    <div class="user-modal" id="userModal">
        <div class="user-header">
            <h2 id="userModalTitle">Mi Cuenta</h2>
            <button class="close-user" onclick="toggleUserModal()"><i class="fas fa-times"></i></button>
        </div>

        <div id="guestView" style="display: block;">
            <div class="guest-welcome">
                <h4>¬°Bienvenido a KLOHE!</h4>
                <p>Inicia sesi√≥n para personalizar tu experiencia y acceder a beneficios exclusivos.</p>
            </div>
            
            <div class="user-section">
                <h3>Iniciar Sesi√≥n</h3>
                <form onsubmit="handleLogin(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nombre</label>
                            <input type="text" id="loginFirstName" required placeholder="Tu nombre">
                        </div>
                        <div class="form-group">
                            <label>Apellido</label>
                            <input type="text" id="loginLastName" required placeholder="Tu apellido">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Pa√≠s</label>
                        <select id="loginCountry" onchange="updateLoginCurrency()">
                            <option value="SV" data-currency="USD" selected>üá∏üáª El Salvador</option>
                            <option value="US" data-currency="USD">üá∫üá∏ Estados Unidos</option>
                            <option value="MX" data-currency="MXN">üá≤üáΩ M√©xico</option>
                            <option value="GT" data-currency="GTQ">üá¨üáπ Guatemala</option>
                            <option value="HN" data-currency="HNL">üá≠üá≥ Honduras</option>
                            <option value="NI" data-currency="NIO">üá≥üáÆ Nicaragua</option>
                            <option value="CR" data-currency="CRC">üá®üá∑ Costa Rica</option>
                            <option value="PA" data-currency="PAB">üáµüá¶ Panam√°</option>
                            <option value="CO" data-currency="COP">üá®üá¥ Colombia</option>
                            <option value="ES" data-currency="EUR">üá™üá∏ Espa√±a</option>
                            <option value="OTHER" data-currency="USD">üåé Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Moneda</label>
                        <select id="loginCurrency">
                            <option value="USD" selected>$ USD</option>
                            <option value="EUR">‚Ç¨ EUR</option>
                            <option value="MXN">$ MXN</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Idioma</label>
                        <select id="loginLanguage">
                            <option value="es" selected>Espa√±ol</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-login">Iniciar Sesi√≥n</button>
                </form>
            </div>
        </div>

        <div id="loggedInView" style="display: none;">
            <div style="text-align: center; margin-bottom: 2rem;">
                <div class="user-avatar" id="userAvatar">U</div>
                <div class="user-name-display" id="displayUserName">Usuario</div>
                <div class="user-email-display" id="displayUserCountry">El Salvador</div>
            </div>

            <div class="user-section">
                <h3>Configuraci√≥n</h3>
                <form onsubmit="updateUserSettings(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nombre</label>
                            <input type="text" id="settingsFirstName">
                        </div>
                        <div class="form-group">
                            <label>Apellido</label>
                            <input type="text" id="settingsLastName">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Pa√≠s</label>
                        <select id="settingsCountry" onchange="updateSettingsCurrency()">
                            <option value="SV" data-currency="USD">üá∏üáª El Salvador</option>
                            <option value="US" data-currency="USD">üá∫üá∏ Estados Unidos</option>
                            <option value="MX" data-currency="MXN">üá≤üáΩ M√©xico</option>
                            <option value="GT" data-currency="GTQ">üá¨üáπ Guatemala</option>
                            <option value="HN" data-currency="HNL">üá≠üá≥ Honduras</option>
                            <option value="NI" data-currency="NIO">üá≥üáÆ Nicaragua</option>
                            <option value="CR" data-currency="CRC">üá®üá∑ Costa Rica</option>
                            <option value="PA" data-currency="PAB">üáµüá¶ Panam√°</option>
                            <option value="CO" data-currency="COP">üá®üá¥ Colombia</option>
                            <option value="ES" data-currency="EUR">üá™üá∏ Espa√±a</option>
                            <option value="OTHER" data-currency="USD">üåé Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Moneda</label>
                        <select id="settingsCurrency">
                            <option value="USD">$ USD</option>
                            <option value="EUR">‚Ç¨ EUR</option>
                            <option value="MXN">$ MXN</option>
                            <option value="GTQ">Q GTQ</option>
                            <option value="HNL">L HNL</option>
                            <option value="NIO">C$ NIO</option>
                            <option value="CRC">‚Ç° CRC</option>
                            <option value="PAB">B/. PAB</option>
                            <option value="COP">$ COP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Idioma</label>
                        <select id="settingsLanguage">
                            <option value="es">Espa√±ol</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-save">Guardar Cambios</button>
                    <button type="button" class="btn-logout" onclick="handleLogout()">Cerrar Sesi√≥n</button>
                </form>
            </div>
        </div>
    </div>

    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1 id="heroTitle">Colecci√≥n San Valent√≠n</h1>
                <p id="heroSubtitle">Regalos que hablan desde el coraz√≥n</p>
                
                <div class="daily-verse-container">
                    <div class="verse-date" id="verseDate"></div>
                    <div class="verse-header">
                        <i class="fas fa-book-open"></i>
                        <span id="verseLabel">Vers√≠culo de Hoy</span>
                    </div>
                    <div class="verse-text" id="verseText"></div>
                    <div class="verse-reference" id="verseReference"></div>
                </div>
                
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" id="searchInput" placeholder="Buscar el regalo perfecto...">
                </div>
            </div>
        </div>
    </section>

    <section class="products">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title" id="categoryTitle">Todas</h2>
                <span class="products-count" id="productsCount">Mostrando 0 de 0 productos</span>
            </div>
            <div class="products-grid" id="productsContainer">
            </div>
            <div class="scroll-sentinel" id="scrollSentinel"></div>
            <div class="loading-spinner" id="loadingSpinner" style="display: none;">
                <div class="spinner"></div>
                <span>Cargando m√°s...</span>
            </div>
        </div>
    </section>

    <section class="testimonials-section">
        <div class="container">
            <div class="testimonials-header">
                <h2>Historias de Amor</h2>
                <p>Lo que nuestros clientes comparten</p>
            </div>
            
            <div class="testimonial-carousel">
                <div class="testimonial-track" id="testimonialTrack">
                </div>
                <div class="carousel-controls">
                    <button class="carousel-btn" onclick="prevTestimonial()"><i class="fas fa-chevron-left"></i></button>
                    <button class="carousel-btn" onclick="nextTestimonial()"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="carousel-dots" id="carouselDots"></div>
            </div>

            <div class="comment-box">
                <h3>Comparte tu historia</h3>
                <form class="comment-form" onsubmit="submitComment(event)">
                    <div class="form-group-comment">
                        <label>Nombre</label>
                        <input type="text" id="commentName" required placeholder="Tu nombre">
                    </div>
                    <div class="form-group-comment">
                        <label>Email</label>
                        <input type="email" id="commentEmail" required placeholder="tu@email.com">
                    </div>
                    <div class="form-group-comment">
                        <label>Calificaci√≥n</label>
                        <select id="commentRating">
                            <option>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 estrellas)</option>
                            <option>‚≠ê‚≠ê‚≠ê‚≠ê (4 estrellas)</option>
                            <option>‚≠ê‚≠ê‚≠ê (3 estrellas)</option>
                            <option>‚≠ê‚≠ê (2 estrellas)</option>
                            <option>‚≠ê (1 estrella)</option>
                        </select>
                    </div>
                    <div class="form-group-comment">
                        <label>Tu experiencia</label>
                        <textarea id="commentText" required placeholder="Cu√©ntanos..."></textarea>
                    </div>
                    <button type="submit" class="btn-submit">Enviar</button>
                </form>
            </div>
        </div>
    </section>

    <div class="preview-modal" id="previewModal" onclick="closePreview(event)">
        <div class="preview-content" onclick="event.stopPropagation()">
            <div class="preview-image-container">
                <img src="" alt="" class="preview-image blur-up" id="previewImage">
            </div>
            <div class="preview-details">
                <h3 class="preview-name" id="previewName"></h3>
                <p class="preview-barcode" id="previewBarcode"></p>
                <p class="preview-price" id="previewPrice"></p>
                <p class="preview-stock" id="previewStock"></p>
                <button class="preview-add-btn" id="previewAddBtn">Agregar al carrito</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <p>WhatsApp: +503 66711569</p>
                    <p>Email: <a href="mailto:industriastobias@gmail.com">industriastobias@gmail.com</a></p>
                    <p>San Salvador, El Salvador</p>
                </div>
                <div class="footer-section">
                    <h4>Redes Sociales</h4>
                    <p>S√≠guenos y descubre novedades</p>
                    <div class="social-footer">
                        <a href="https://instagram.com/klohesv" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://tiktok.com/@klohesv" target="_blank"><i class="fab fa-tiktok"></i></a>
                        <a href="https://facebook.com/klohejewelry" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>üïê Horarios</h4>
                    <p>Lunes a Domingo</p>
                    <p>7:00 AM - 10:00 PM</p>
                    <p>Siempre abiertos</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2026 KLOHE. Hecho con ‚ô• en El Salvador</p>
            </div>
        </div>
    </footer>

    <a href="https://wa.me/50366711569" target="_blank" class="whatsapp-float">
        <i class="fab fa-whatsapp"></i>
        <span class="whatsapp-tooltip">¬øNecesitas ayuda?</span>
    </a>

    <div class="newsletter-overlay" id="newsletterOverlay" onclick="closeNewsletter()"></div>
    <div class="newsletter-popup" id="newsletterPopup">
        <button class="newsletter-close" onclick="closeNewsletter()"><i class="fas fa-times"></i></button>
        <h3>¬°Bienvenido!</h3>
        <p>Obt√©n un <strong>5% de descuento</strong> en tu primera compra</p>
        <div class="newsletter-code">KLOHELOVER</div>
        <p style="font-size: 0.8rem;">Usa este c√≥digo al pagar</p>
    </div>

    <div class="overlay" id="overlay" onclick="toggleCart()"></div>
    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h2>Tu Carrito</h2>
            <button class="close-cart" onclick="toggleCart()"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="shipping-option">
            <div class="shipping-header">
                <span class="shipping-title">Env√≠o a todo el pa√≠s</span>
                <div class="shipping-toggle" id="shippingToggle" onclick="toggleShipping()"></div>
            </div>
            <div class="shipping-price" id="shippingPrice" style="display: none;">+$3.75</div>
            <div class="shipping-desc">Entrega en 2-3 d√≠as h√°biles</div>
        </div>

        <div id="cartItems">
            <div class="cart-empty">Tu carrito est√° vac√≠o</div>
        </div>
        
        <div class="cart-summary" id="cartSummary" style="display: none;">
            <div class="summary-row">
                <span>Subtotal:</span>
                <span id="cartSubtotal">$0.00</span>
            </div>
            <div class="summary-row" id="shippingRow" style="display: none;">
                <span>Env√≠o:</span>
                <span>$3.75</span>
            </div>
        </div>
        
        <div class="cart-total">
            <span>Total:</span>
            <span id="cartTotal">$0.00</span>
        </div>
        <a href="#" class="btn-whatsapp" id="whatsappBtn" target="_blank">
            <i class="fab fa-whatsapp"></i> Comprar por WhatsApp
        </a>
        <button class="btn-clear-cart" onclick="clearCart()" id="clearCartBtn" style="display: none;">
            <i class="fas fa-trash-alt"></i> Vaciar carrito
        </button>
    </div>

    <div class="notification" id="notification">Producto agregado</div>

    <script src="products.js"></script>
    
    <script>
        // User State
        const UserState = {
            currentUser: JSON.parse(localStorage.getItem('klohe_user')) || null,
            settings: JSON.parse(localStorage.getItem('klohe_settings')) || {
                language: 'es',
                country: 'SV',
                currency: 'USD'
            }
        };

        // Exchange rates (to USD base)
        const exchangeRates = {
            'USD': 1,
            'EUR': 0.92,
            'MXN': 18.5,
            'GTQ': 7.8,
            'HNL': 24.7,
            'NIO': 36.5,
            'CRC': 530,
            'PAB': 1,
            'COP': 3900
        };

        const currencySymbols = {
            'USD': '$',
            'EUR': '‚Ç¨',
            'MXN': '$',
            'GTQ': 'Q',
            'HNL': 'L',
            'NIO': 'C$',
            'CRC': '‚Ç°',
            'PAB': 'B/.',
            'COP': '$'
        };

        const countryNames = {
            'SV': 'El Salvador',
            'US': 'Estados Unidos',
            'MX': 'M√©xico',
            'GT': 'Guatemala',
            'HN': 'Honduras',
            'NI': 'Nicaragua',
            'CR': 'Costa Rica',
            'PA': 'Panam√°',
            'CO': 'Colombia',
            'ES': 'Espa√±a',
            'OTHER': 'Otro'
        };

        // Translations
        const translations = {
            es: {
                valentine_collection: "Colecci√≥n San Valent√≠n",
                gifts_from_heart: "Regalos que hablan desde el coraz√≥n",
                verse_of_day: "Vers√≠culo de Hoy",
                search_placeholder: "Buscar el regalo perfecto...",
                showing_products: "Mostrando {shown} de {total} productos",
                categories: "Categor√≠as",
                all: "Todas",
                add_to_cart: "Agregar al carrito",
                sold_out: "Agotado",
                your_cart: "Tu Carrito",
                empty_cart: "Tu carrito est√° vac√≠o",
                subtotal: "Subtotal:",
                shipping: "Env√≠o:",
                total: "Total:",
                buy_whatsapp: "Comprar por WhatsApp",
                empty_cart_btn: "Vaciar carrito",
                quick_view: "Vista r√°pida",
                code: "COD",
                available: "disp.",
                units_available: "unidades disponibles",
                need_help: "¬øNecesitas ayuda?",
                welcome: "¬°Bienvenido!",
                my_account: "Mi Cuenta",
                login: "Iniciar Sesi√≥n",
                save_changes: "Guardar Cambios",
                logout: "Cerrar Sesi√≥n",
                name: "Nombre",
                lastname: "Apellido",
                country: "Pa√≠s",
                currency: "Moneda",
                language: "Idioma",
                product_added: "Producto agregado",
                cart_cleared: "Carrito vaciado"
            },
            en: {
                valentine_collection: "Valentine's Day Collection",
                gifts_from_heart: "Gifts that speak from the heart",
                verse_of_day: "Verse of the Day",
                search_placeholder: "Search for the perfect gift...",
                showing_products: "Showing {shown} of {total} products",
                categories: "Categories",
                all: "All",
                add_to_cart: "Add to cart",
                sold_out: "Sold out",
                your_cart: "Your Cart",
                empty_cart: "Your cart is empty",
                subtotal: "Subtotal:",
                shipping: "Shipping:",
                total: "Total:",
                buy_whatsapp: "Buy via WhatsApp",
                empty_cart_btn: "Empty cart",
                quick_view: "Quick view",
                code: "SKU",
                available: "avail.",
                units_available: "units available",
                need_help: "Need help?",
                welcome: "Welcome!",
                my_account: "My Account",
                login: "Sign In",
                save_changes: "Save Changes",
                logout: "Sign Out",
                name: "First Name",
                lastname: "Last Name",
                country: "Country",
                currency: "Currency",
                language: "Language",
                product_added: "Product added",
                cart_cleared: "Cart cleared"
            }
        };

        const verses = [
            { es: { text: "El amor es paciente, es bondadoso...", ref: "1 Corintios 13:4" }, en: { text: "Love is patient, love is kind...", ref: "1 Corinthians 13:4" } },
            { es: { text: "Todo lo puedo en Cristo...", ref: "Filipenses 4:13" }, en: { text: "I can do all things through Christ...", ref: "Philippians 4:13" } },
            { es: { text: "El Se√±or es mi pastor...", ref: "Salmo 23:1" }, en: { text: "The Lord is my shepherd...", ref: "Psalm 23:1" } },
            { es: { text: "Porque de tal manera am√≥ Dios...", ref: "Juan 3:16" }, en: { text: "For God so loved the world...", ref: "John 3:16" } }
        ];

        const CONFIG = {
            productsPerPage: 12,
            preloadOffset: '200px'
        };

        const AppState = {
            currentFilter: 'todos',
            cart: JSON.parse(localStorage.getItem('klohe_cart')) || [],
            currentPage: 0,
            filteredProducts: [],
            shippingEnabled: false,
            isLoading: false,
            hasMoreProducts: true,
            currentTestimonial: 0
        };

        // Global placeholder for images
        const placeholder = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Crect width='400' height='400' fill='%23F5E6E0'/%3E%3C/svg%3E`;

        function formatPrice(usdPrice) {
            const currency = UserState.settings.currency;
            const rate = exchangeRates[currency] || 1;
            const symbol = currencySymbols[currency] || '$';
            const converted = usdPrice * rate;
            
            if (currency === 'USD' || currency === 'EUR') {
                return `${symbol}${converted.toFixed(2)}`;
            } else {
                return `${symbol}${Math.round(converted)}`;
            }
        }

        function t(key, replacements = {}) {
            const lang = UserState.settings.language;
            let text = translations[lang][key] || key;
            Object.keys(replacements).forEach(k => {
                text = text.replace(`{${k}}`, replacements[k]);
            });
            return text;
        }

        function updateUILanguage() {
            const lang = UserState.settings.language;
            
            document.getElementById('heroTitle').textContent = t('valentine_collection');
            document.getElementById('heroSubtitle').textContent = t('gifts_from_heart');
            document.getElementById('verseLabel').textContent = t('verse_of_day');
            document.getElementById('searchInput').placeholder = t('search_placeholder');
            document.getElementById('menuTitle').textContent = t('categories');
            
            const allBtn = document.querySelector('.categories-menu button.active');
            if (allBtn) allBtn.textContent = t('all');
            
            document.getElementById('userModalTitle').textContent = t('my_account');
            
            if (typeof products !== 'undefined') {
                document.getElementById('productsContainer').innerHTML = '';
                AppState.currentPage = 0;
                renderProducts();
                updateProductsCount();
            }
            
            displayDailyVerse();
        }

        function toggleUserModal() {
            const modal = document.getElementById('userModal');
            const overlay = document.getElementById('userOverlay');
            const isActive = modal.classList.contains('active');
            
            if (isActive) {
                modal.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            } else {
                document.getElementById('cartModal').classList.remove('active');
                document.getElementById('overlay').classList.remove('active');
                document.getElementById('categoriesMenu').classList.remove('active');
                document.getElementById('menuOverlay').classList.remove('active');
                document.getElementById('menuBtn').classList.remove('active');
                
                updateUserModalView();
                modal.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function updateUserModalView() {
            const guestView = document.getElementById('guestView');
            const loggedInView = document.getElementById('loggedInView');
            const userIcon = document.getElementById('userIcon');
            
            if (UserState.currentUser) {
                guestView.style.display = 'none';
                loggedInView.style.display = 'block';
                userIcon.classList.add('logged-in');
                
                document.getElementById('settingsFirstName').value = UserState.currentUser.firstName;
                document.getElementById('settingsLastName').value = UserState.currentUser.lastName;
                document.getElementById('settingsCountry').value = UserState.settings.country;
                document.getElementById('settingsCurrency').value = UserState.settings.currency;
                document.getElementById('settingsLanguage').value = UserState.settings.language;
                
                document.getElementById('displayUserName').textContent = `${UserState.currentUser.firstName} ${UserState.currentUser.lastName}`;
                document.getElementById('displayUserCountry').textContent = countryNames[UserState.settings.country] || 'El Salvador';
                document.getElementById('userAvatar').textContent = UserState.currentUser.firstName.charAt(0).toUpperCase();
            } else {
                guestView.style.display = 'block';
                loggedInView.style.display = 'none';
                userIcon.classList.remove('logged-in');
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            const firstName = document.getElementById('loginFirstName').value.trim();
            const lastName = document.getElementById('loginLastName').value.trim();
            const country = document.getElementById('loginCountry').value;
            const currency = document.getElementById('loginCurrency').value;
            const language = document.getElementById('loginLanguage').value;
            
            UserState.currentUser = { firstName, lastName };
            UserState.settings = { country, currency, language };
            
            localStorage.setItem('klohe_user', JSON.stringify(UserState.currentUser));
            localStorage.setItem('klohe_settings', JSON.stringify(UserState.settings));
            
            updateUserModalView();
            updateUILanguage();
            showNotification(language === 'es' ? '¬°Bienvenido, ' + firstName + '!' : 'Welcome, ' + firstName + '!');
        }

        function updateUserSettings(e) {
            e.preventDefault();
            const firstName = document.getElementById('settingsFirstName').value.trim();
            const lastName = document.getElementById('settingsLastName').value.trim();
            const country = document.getElementById('settingsCountry').value;
            const currency = document.getElementById('settingsCurrency').value;
            const language = document.getElementById('settingsLanguage').value;
            
            UserState.currentUser = { firstName, lastName };
            UserState.settings = { country, currency, language };
            
            localStorage.setItem('klohe_user', JSON.stringify(UserState.currentUser));
            localStorage.setItem('klohe_settings', JSON.stringify(UserState.settings));
            
            updateUserModalView();
            updateUILanguage();
            showNotification(t('save_changes'));
        }

        function handleLogout() {
            UserState.currentUser = null;
            localStorage.removeItem('klohe_user');
            UserState.settings = { language: 'es', country: 'SV', currency: 'USD' };
            localStorage.setItem('klohe_settings', JSON.stringify(UserState.settings));
            
            updateUserModalView();
            updateUILanguage();
            showNotification(t('logout'));
        }

        function updateLoginCurrency() {
            const countrySelect = document.getElementById('loginCountry');
            const currencySelect = document.getElementById('loginCurrency');
            const selectedOption = countrySelect.options[countrySelect.selectedIndex];
            const suggestedCurrency = selectedOption.getAttribute('data-currency');
            
            if (suggestedCurrency) {
                currencySelect.value = suggestedCurrency;
            }
        }

        function updateSettingsCurrency() {
            const countrySelect = document.getElementById('settingsCountry');
            const currencySelect = document.getElementById('settingsCurrency');
            const selectedOption = countrySelect.options[countrySelect.selectedIndex];
            const suggestedCurrency = selectedOption.getAttribute('data-currency');
            
            if (suggestedCurrency) {
                currencySelect.value = suggestedCurrency;
            }
        }

        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.classList.add('loaded');
                        img.removeAttribute('data-src');
                    }
                    imageObserver.unobserve(img);
                }
            });
        }, { rootMargin: '50px 0px', threshold: 0.01 });

        let scrollObserver;

        function initInfiniteScroll() {
            const sentinel = document.getElementById('scrollSentinel');
            if (scrollObserver) scrollObserver.disconnect();
            
            scrollObserver = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting && !AppState.isLoading && AppState.hasMoreProducts) {
                    loadMoreProducts();
                }
            }, { rootMargin: CONFIG.preloadOffset, threshold: 0.1 });
            
            if (sentinel) scrollObserver.observe(sentinel);
        }

        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }

        function displayDailyVerse() {
            const today = new Date();
            const dayOfMonth = today.getDate();
            const verseIndex = (dayOfMonth - 1) % verses.length;
            const verse = verses[verseIndex][UserState.settings.language];
            
            const months = UserState.settings.language === 'es' 
                ? ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre']
                : ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            
            const dateStr = UserState.settings.language === 'es'
                ? `${dayOfMonth} de ${months[today.getMonth()]} de ${today.getFullYear()}`
                : `${months[today.getMonth()]} ${dayOfMonth}, ${today.getFullYear()}`;
            
            const dateEl = document.getElementById('verseDate');
            const textEl = document.getElementById('verseText');
            const refEl = document.getElementById('verseReference');
            
            if (dateEl) dateEl.textContent = dateStr;
            if (textEl) textEl.textContent = verse.text;
            if (refEl) refEl.textContent = `‚Äî ${verse.ref}`;
        }

        function renderSkeletons(count = 8) {
            const container = document.getElementById('productsContainer');
            if (!container) return;
            container.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const skeleton = document.createElement('div');
                skeleton.className = 'product-card loading';
                skeleton.innerHTML = `
                    <div class="product-image-container"><div class="skeleton skeleton-image"></div></div>
                    <div class="product-info">
                        <div class="product-name skeleton-text"></div>
                        <div class="product-barcode skeleton-text"></div>
                        <div class="product-row"><div class="product-price skeleton-text"></div></div>
                        <div class="skeleton" style="height: 44px; width: 100%;"></div>
                    </div>
                `;
                container.appendChild(skeleton);
            }
        }

        function toggleMenu() {
            const menu = document.getElementById('categoriesMenu');
            const overlay = document.getElementById('menuOverlay');
            const btn = document.getElementById('menuBtn');
            
            if (!menu || !overlay || !btn) return;
            
            const isActive = menu.classList.contains('active');
            
            if (isActive) {
                menu.classList.remove('active');
                overlay.classList.remove('active');
                btn.classList.remove('active');
                document.body.style.overflow = '';
            } else {
                menu.classList.add('active');
                overlay.classList.add('active');
                btn.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function searchProducts(term) {
            if (typeof products === 'undefined') return;
            
            const searchTerm = term.toLowerCase().trim();
            AppState.currentPage = 0;
            AppState.hasMoreProducts = true;
            
            const container = document.getElementById('productsContainer');
            if (container) {
                container.innerHTML = '';
                renderSkeletons(4);
            }
            
            setTimeout(() => {
                if (searchTerm === '') {
                    AppState.filteredProducts = [...products];
                } else {
                    AppState.filteredProducts = products.filter(p => 
                        p.name.toLowerCase().includes(searchTerm) || 
                        p.barcode.toLowerCase().includes(searchTerm)
                    );
                }
                
                const container = document.getElementById('productsContainer');
                if (container) container.innerHTML = '';
                
                renderProducts();
                updateProductsCount();
                
                const catTitle = document.getElementById('categoryTitle');
                if (catTitle) {
                    if (searchTerm) {
                        catTitle.textContent = `"${term}"`;
                    } else {
                        catTitle.textContent = t('all');
                    }
                }
            }, 300);
        }

        function filterProducts(category, btn) {
            if (typeof products === 'undefined') {
                console.error('Products not loaded yet');
                return;
            }
            
            AppState.currentFilter = category;
            AppState.currentPage = 0;
            AppState.hasMoreProducts = true;
            
            const searchInput = document.getElementById('searchInput');
            if (searchInput) searchInput.value = '';
            
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            if (btn) btn.classList.add('active');
            
            const titles = {
                'todos': t('all'),
                'accesorios-cabello': 'Accesorios para el cabello',
                'anillo': 'Anillos',
                'aritos': 'Aritos',
                'cartera': 'Carteras',
                'collar': 'Collares',
                'lentes-sol': 'Lentes de sol',
                'otros': 'Otros',
                'pulsera': 'Pulseras',
                'reloj': 'Relojes'
            };
            
            const catTitle = document.getElementById('categoryTitle');
            if (catTitle) catTitle.textContent = titles[category] || category;
            
            const container = document.getElementById('productsContainer');
            if (container) {
                container.innerHTML = '';
                renderSkeletons(4);
            }
            
            setTimeout(() => {
                if (category === 'todos') {
                    AppState.filteredProducts = [...products];
                } else {
                    const catMap = {
                        'accesorios-cabello': 'Accesorios para el cabello',
                        'anillo': 'Anillos',
                        'aritos': 'Aritos',
                        'cartera': 'Carteras',
                        'collar': 'Collares',
                        'lentes-sol': 'Lentes de sol',
                        'otros': 'Otros',
                        'pulsera': 'Pulseras',
                        'reloj': 'Relojes'
                    };
                    AppState.filteredProducts = products.filter(p => p.category === catMap[category]);
                }
                
                if (container) container.innerHTML = '';
                renderProducts();
                updateProductsCount();
                
                // Cerrar men√∫ solo si est√° abierto
                const menu = document.getElementById('categoriesMenu');
                if (menu && menu.classList.contains('active')) {
                    toggleMenu();
                }
            }, 300);
        }

        function renderProducts() {
            const container = document.getElementById('productsContainer');
            if (!container) return;
            
            const start = AppState.currentPage * CONFIG.productsPerPage;
            const end = start + CONFIG.productsPerPage;
            const toShow = AppState.filteredProducts.slice(start, end);
            
            if (toShow.length === 0 && AppState.currentPage === 0) {
                container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 3rem;">No se encontraron productos</div>';
                AppState.hasMoreProducts = false;
                return;
            }
            
            toShow.forEach((product, idx) => {
                const card = createProductCard(product, start + idx);
                container.appendChild(card);
            });
            
            AppState.hasMoreProducts = end < AppState.filteredProducts.length;
            updateProductsCount();
            
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) {
                spinner.style.display = AppState.hasMoreProducts ? 'flex' : 'none';
            }
        }

        function createProductCard(product, index) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.style.animationDelay = `${index * 0.05}s`;
            
            const hasStock = product.stock > 0;
            
            card.innerHTML = `
                <div class="product-image-container" onclick="openPreview('${product.barcode}')">
                    <img data-src="${product.barcode}.jpg" alt="${product.name}" class="product-image blur-up" src="${placeholder}" loading="lazy">
                    <span class="stock-badge">${product.stock} ${t('available')}</span>
                </div>
                <div class="product-info">
                    <h3 class="product-name">${product.name}</h3>
                    <p class="product-barcode">${t('code')}: ${product.barcode}</p>
                    <div class="product-row">
                        <span class="product-price">${formatPrice(product.price)}</span>
                        <button class="eye-btn" onclick="event.stopPropagation(); openPreview('${product.barcode}')" title="${t('quick_view')}">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button class="btn-add-cart" onclick="addToCart('${product.barcode}')" ${!hasStock ? 'disabled' : ''}>
                        ${hasStock ? t('add_to_cart') : t('sold_out')}
                    </button>
                </div>
            `;
            
            const img = card.querySelector('img[data-src]');
            if (img) imageObserver.observe(img);
            
            return card;
        }

        function loadMoreProducts() {
            if (AppState.isLoading || !AppState.hasMoreProducts) return;
            AppState.isLoading = true;
            
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) spinner.style.display = 'flex';
            
            setTimeout(() => {
                AppState.currentPage++;
                renderProducts();
                AppState.isLoading = false;
            }, 400);
        }

        function updateProductsCount() {
            const shown = Math.min((AppState.currentPage + 1) * CONFIG.productsPerPage, AppState.filteredProducts.length);
            const total = AppState.filteredProducts.length;
            const countEl = document.getElementById('productsCount');
            if (countEl) countEl.textContent = t('showing_products', {shown, total});
        }

        function openPreview(barcode) {
            if (typeof products === 'undefined') return;
            
            const product = products.find(p => p.barcode === barcode);
            if (!product) return;
            
            const modal = document.getElementById('previewModal');
            const img = document.getElementById('previewImage');
            const name = document.getElementById('previewName');
            const barcodeEl = document.getElementById('previewBarcode');
            const price = document.getElementById('previewPrice');
            const stock = document.getElementById('previewStock');
            const btn = document.getElementById('previewAddBtn');
            
            if (img) {
                img.src = `${product.barcode}.jpg`;
                img.classList.remove('loaded');
                img.onload = () => img.classList.add('loaded');
            }
            if (name) name.textContent = product.name;
            if (barcodeEl) barcodeEl.textContent = `${t('code')}: ${product.barcode}`;
            if (price) price.textContent = formatPrice(product.price);
            if (stock) stock.textContent = `${product.stock} ${t('units_available')}`;
            
            if (btn) {
                if (product.stock > 0) {
                    btn.disabled = false;
                    btn.textContent = t('add_to_cart');
                    btn.onclick = () => { addToCart(product.barcode); closePreview(); };
                } else {
                    btn.disabled = true;
                    btn.textContent = t('sold_out');
                }
            }
            
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closePreview(e) {
            if (e && e.target !== e.currentTarget) return;
            const modal = document.getElementById('previewModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        function addToCart(barcode) {
            if (typeof products === 'undefined') {
                console.error('Products not loaded');
                return;
            }
            
            const product = products.find(p => p.barcode === barcode);
            if (!product) {
                console.error('Product not found:', barcode);
                return;
            }
            
            if (product.stock <= 0) {
                showNotification('Sin stock', 'error');
                return;
            }
            
            const existing = AppState.cart.find(i => i.barcode === product.barcode);
            if (existing) {
                if (existing.quantity < product.stock) {
                    existing.quantity++;
                } else {
                    showNotification(t('max_stock') || 'Stock m√°ximo alcanzado', 'error');
                    return;
                }
            } else {
                AppState.cart.push({ ...product, quantity: 1 });
            }
            
            localStorage.setItem('klohe_cart', JSON.stringify(AppState.cart));
            updateCart();
            showNotification(t('product_added'));
        }

        function removeFromCart(barcode) {
            AppState.cart = AppState.cart.filter(i => i.barcode !== barcode);
            localStorage.setItem('klohe_cart', JSON.stringify(AppState.cart));
            updateCart();
        }

        function clearCart() {
            if (!confirm('¬øVaciar carrito?')) return;
            AppState.cart = [];
            localStorage.removeItem('klohe_cart');
            updateCart();
            showNotification(t('cart_cleared'));
        }

        function updateCart() {
            const items = document.getElementById('cartItems');
            const badge = document.getElementById('cartBadge');
            const totalItems = AppState.cart.reduce((sum, i) => sum + i.quantity, 0);
            
            if (badge) {
                badge.textContent = totalItems;
                badge.style.display = totalItems > 0 ? 'flex' : 'none';
            }
            
            const clearBtn = document.getElementById('clearCartBtn');
            if (clearBtn) clearBtn.style.display = totalItems > 0 ? 'block' : 'none';
            
            if (AppState.cart.length === 0) {
                if (items) items.innerHTML = `<div class="cart-empty">${t('empty_cart')}</div>`;
                const summary = document.getElementById('cartSummary');
                if (summary) summary.style.display = 'none';
                const whatsappBtn = document.getElementById('whatsappBtn');
                if (whatsappBtn) whatsappBtn.style.display = 'none';
                const total = document.getElementById('cartTotal');
                if (total) total.textContent = formatPrice(0);
                return;
            }
            
            if (items) {
                items.innerHTML = '';
                let subtotal = 0;
                
                AppState.cart.forEach(item => {
                    subtotal += item.price * item.quantity;
                    items.innerHTML += `
                        <div class="cart-item">
                            <div class="cart-item-image">
                                <img src="${item.barcode}.jpg" alt="${item.name}" onerror="this.src='${placeholder}'">
                            </div>
                            <div class="cart-item-details">
                                <h4>${item.name}</h4>
                                <p class="cart-item-code">${t('code')}: ${item.barcode}</p>
                                <p>${formatPrice(item.price)} x ${item.quantity}</p>
                            </div>
                            <button class="remove-item" onclick="removeFromCart('${item.barcode}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                });
                
                const shipping = AppState.shippingEnabled ? 3.75 : 0;
                const total = subtotal + shipping;
                
                const subtotalEl = document.getElementById('cartSubtotal');
                const totalEl = document.getElementById('cartTotal');
                const shippingRow = document.getElementById('shippingRow');
                const summary = document.getElementById('cartSummary');
                const whatsappBtn = document.getElementById('whatsappBtn');
                
                if (subtotalEl) subtotalEl.textContent = formatPrice(subtotal);
                if (totalEl) totalEl.textContent = formatPrice(total);
                if (summary) summary.style.display = 'block';
                if (whatsappBtn) whatsappBtn.style.display = 'flex';
                if (shippingRow) shippingRow.style.display = AppState.shippingEnabled ? 'flex' : 'none';
                
                const msg = AppState.cart.map(i => `‚Ä¢ ${i.name} - ${i.quantity}`).join('%0A');
                const greeting = UserState.settings.language === 'es' ? 'Hola' : 'Hello';
                if (whatsappBtn) {
                    whatsappBtn.href = `https://wa.me/50366711569?text=${greeting}!%0A${msg}%0A%0ATotal: ${formatPrice(total)}`;
                }
            }
        }

        function toggleShipping() {
            AppState.shippingEnabled = !AppState.shippingEnabled;
            const toggle = document.getElementById('shippingToggle');
            const price = document.getElementById('shippingPrice');
            
            if (toggle) toggle.classList.toggle('active');
            if (price) price.style.display = AppState.shippingEnabled ? 'block' : 'none';
            
            updateCart();
        }

        function toggleCart() {
            const modal = document.getElementById('cartModal');
            const overlay = document.getElementById('overlay');
            
            if (!modal || !overlay) return;
            
            const isActive = modal.classList.contains('active');
            
            if (isActive) {
                modal.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            } else {
                updateCart();
                modal.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeNewsletter() {
            const popup = document.getElementById('newsletterPopup');
            const overlay = document.getElementById('newsletterOverlay');
            if (popup) popup.classList.remove('active');
            if (overlay) overlay.classList.remove('active');
        }

        const testimonials = [
            { name: "Mar√≠a F.", text: "El collar fue el regalo perfecto...", text_en: "The necklace was the perfect gift...", date: "15 Ene 2026", stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ" },
            { name: "Carlos M.", text: "Excelente servicio...", text_en: "Excellent service...", date: "12 Ene 2026", stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ" },
            { name: "Ana L.", text: "Los aretes son perfectos...", text_en: "The earrings are perfect...", date: "10 Ene 2026", stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ" }
        ];

        function initTestimonials() {
            const track = document.getElementById('testimonialTrack');
            const dots = document.getElementById('carouselDots');
            if (!track) return;
            
            const lang = UserState.settings.language;
            
            track.innerHTML = testimonials.map(t => `
                <div class="testimonial-slide">
                    <div class="testimonial-card">
                        <div class="testimonial-stars">${t.stars}</div>
                        <p class="testimonial-text">"${lang === 'es' ? t.text : t.text_en}"</p>
                        <div class="testimonial-author">${t.name}</div>
                        <div class="testimonial-date">${t.date}</div>
                    </div>
                </div>
            `).join('');
            
            if (dots) {
                dots.innerHTML = testimonials.map((_, i) => 
                    `<div class="dot ${i === 0 ? 'active' : ''}" onclick="goToTestimonial(${i})"></div>`
                ).join('');
            }
        }

        function updateCarousel() {
            const track = document.getElementById('testimonialTrack');
            if (track) {
                track.style.transform = `translateX(-${AppState.currentTestimonial * 100}%)`;
            }
            document.querySelectorAll('.dot').forEach((d, i) => {
                d.classList.toggle('active', i === AppState.currentTestimonial);
            });
        }

        function nextTestimonial() {
            AppState.currentTestimonial = (AppState.currentTestimonial + 1) % testimonials.length;
            updateCarousel();
        }

        function prevTestimonial() {
            AppState.currentTestimonial = (AppState.currentTestimonial - 1 + testimonials.length) % testimonials.length;
            updateCarousel();
        }

        function goToTestimonial(i) {
            AppState.currentTestimonial = i;
            updateCarousel();
        }

        setInterval(() => {
            if (!document.hidden) nextTestimonial();
        }, 5000);

        function submitComment(e) {
            e.preventDefault();
            showNotification(UserState.settings.language === 'es' ? '¬°Gracias por tu comentario!' : 'Thank you for your comment!');
            e.target.reset();
        }

        function showNotification(msg, type = 'success') {
            const notif = document.getElementById('notification');
            if (!notif) return;
            
            notif.textContent = msg;
            notif.style.background = type === 'error' ? '#dc3545' : 'var(--bordo)';
            notif.classList.add('show');
            setTimeout(() => notif.classList.remove('show'), 2500);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar configuraci√≥n inicial
            if (UserState.settings.language) {
                updateUILanguage();
            }
            
            displayDailyVerse();
            updateUserModalView();
            
            // Set initial select values
            const loginLang = document.getElementById('loginLanguage');
            const loginCountry = document.getElementById('loginCountry');
            const loginCurrency = document.getElementById('loginCurrency');
            
            if (loginLang) loginLang.value = UserState.settings.language;
            if (loginCountry) loginCountry.value = UserState.settings.country;
            if (loginCurrency) loginCurrency.value = UserState.settings.currency;
            
            renderSkeletons(8);
            
            // Esperar a que products.js cargue
            if (typeof products !== 'undefined') {
                AppState.filteredProducts = [...products];
                
                // Validar carrito contra productos disponibles
                const validBarcodes = new Set(products.map(p => p.barcode));
                AppState.cart = AppState.cart.filter(item => validBarcodes.has(item.barcode));
                AppState.cart = AppState.cart.map(item => {
                    const fresh = products.find(p => p.barcode === item.barcode);
                    return fresh ? { ...fresh, quantity: Math.min(item.quantity, fresh.stock) } : item;
                }).filter(item => item && item.barcode); // Filtrar undefined
                
                localStorage.setItem('klohe_cart', JSON.stringify(AppState.cart));
                
                setTimeout(() => {
                    const container = document.getElementById('productsContainer');
                    if (container) container.innerHTML = '';
                    
                    renderProducts();
                    updateProductsCount();
                    initInfiniteScroll();
                    updateCart();
                }, 600);
            } else {
                console.error('products.js no est√° cargado correctamente');
            }
            
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', debounce((e) => {
                    searchProducts(e.target.value);
                }, 300));
            }

            const menuBtn = document.getElementById('menuBtn');
            const menuOverlay = document.getElementById('menuOverlay');
            
            if (menuBtn) menuBtn.addEventListener('click', toggleMenu);
            if (menuOverlay) menuOverlay.addEventListener('click', toggleMenu);
            
            initTestimonials();
            
            // Newsletter popup
            setTimeout(() => {
                if (!sessionStorage.getItem('newsletterShown')) {
                    const popup = document.getElementById('newsletterPopup');
                    const overlay = document.getElementById('newsletterOverlay');
                    if (popup) popup.classList.add('active');
                    if (overlay) overlay.classList.add('active');
                    sessionStorage.setItem('newsletterShown', 'true');
                }
            }, 5000);
        });
    </script>
</body>
</html>
